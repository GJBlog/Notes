## 第10章-错误处理与异常

通常错误类型

1、数据错误

2、系统错误

3、程序错误

#### 一、异常处理

* 报错信息格式

```ruby
文件名: 行号 :in 方法名: 错误信息(异常类名)
   from 文件名: 行号:in 方法名
```

* 以from开头的行表示发生错误的位置

异常处理优点

1、程序不需要逐个确认处理结果，也能自动检查出程序错误

2、会同时报告发生错误的位置，便于排查错误

3、正常处理与错误处理的程序可以分开书写，使程序便于阅读

#### 三、异常处理的写法

* 在ruby中使用**begin~ rescue~end**语句描述异常处理

```ruby
begin
  可能发生异常的处理
rescue => 引用异常对象的变量
  发生异常的处理
end
```

* 在 rescue 后指定变量名，可以获得异常对象，如果不指定变量名，Ruby会默认把异常对象赋值给变量$!

| 变量 | 意义 |
| :-----:| :----: |
| $! | 最后发生的异常(异常对象) |
| $@ | 最后发生的异常的位置信息 |

| 方法名 | 意义 |
| :-----:| :----: |
| class | 最后发生的异常(异常对象) |
| message | 最后发生的异常的位置信息 |