## 可选值

#### map

对于可选值，调用 **map** 时，如果转换本身也是可选值，那么最终得到的将是一个双重嵌套的可选值

```swift
let stringNumbers = ["1", "2", "3", "foo"]
let x = stringNumbers.first.map { Int($0) }
x 的类型是 Int??
```

#### flatMap

可以把结果展平为单个可选值

```swift
let stringNumbers = ["1", "2", "3", "foo"]
let x = stringNumbers.first.flatMap { Int($0) }
x 的类型是 Int?
```

#### compactMap

使用模式匹配

```swift
for case let i? in numbers.map({ Int($0) }) {
  // i 是非可选值
	print(i)
}
```

可以将nil过滤出去，并将非**nil**值进行解包的map

