## 运输层

### 运输层的位置

* 它向上面的应用层提供通信服务，属于面向通信部分的最高层，同时也是用户功能中的最低层
* 真正进行通信的实体是在主机中的进程，是这个主机中的一个进程和两一个主机中的一个进程在交换数据(通信)，所以严格说，两个主机进行通信就是两个主机中的应用进程互相通信。

### 运输层的很重要功能

* 复用：指在发送方不同的应用进程都可以使用同一个运输层协议传送数据
* 分用：指接收方的运输层在剥去报文的首部后能够把这些数据正确交付到目的应用进程

### 运输层协议

#### 面向连接的TCP协议

* 名称：传输控制协议(Transmission Control Protocl)
* 提供一条全双工的可靠信道
* 数据单位：按照OSI(开放系统互联基本参考模型),叫运输协议数据单元TPDU(Transport Protocol DAta Unit);在TCP/IP体系中，叫TCP报文段
* 提供面向连接的服务，即在传送数据前必须先建立连接，数据传送结束后要释放连接。

#### 无连接的UDP协议

* 名称：用户数据报协议(User Datagram Protocol)
* 提供一条不可靠信道
* 数据单位：按照OSI,叫运输协议数据单元TPDU(Transport Protocol DAta Unit);在TCP/IP体系中，叫UDP用户数据报
* 在传送数据前不需要先建立连接，且接收到UDP报文后不需要给出任何确认

#### 运输层端口号

* 服务器端使用的端口号

    * 熟知端口号/系统端口号(0~1023)：FTP(21)、DNS(53)、HTTP(80)…………
    * 登记端口号(1024~49151)：为没有熟知端口号的应用程序使用的
    
* 客户端使用的端口号(49152~65535)/短暂端口号

### 注意点

* 从IP层来说，通信的两端是两个主机，在IP数据报的首部明确标志了这两个主机的IP地址。
* 从运输层来说，通信的真正的端点并不是主机而是主机中的进程，也就是说端到端的通信，就是应用进程之间的通信
* 网络层(IP层)是为主机之间提供逻辑通信，而运输层是为应用进程之间提供端到端的逻辑通信
* 对收到的报文做差错检测，而在网络层，IP数据报首部中的检验和字段，只校验首部是否出现差错而不检查数据部分