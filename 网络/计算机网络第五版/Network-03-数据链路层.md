### 数据链路层

> 使用的信道类型：点对点信道、广播信道

#### 点对点信道

##### 协议：PPP

##### 链路：是从一个结点到相邻结点的一段物理线路，只是一条路径的组成部分

##### 数据链路：是物理链路 + 必要的通信协议、传输的数据

##### 三大问题

##### 1、封装成帧

##### MTU：帧中数据部分最大长度(Maximum Transfer Unit)

![image-20201111233713617](/Users/guo/Library/Application Support/typora-user-images/image-20201111233713617.png)

```
帧的长度 = 帧首部 + 数据部分 + 帧尾部
帧的首部作用：进行帧定界(确定帧的界限)，控制字符SOH(Start Of Header)放在一帧的最前面，表示帧的首部开始(对应的十六进制编码是01,对应的二进制是：00000001)
帧的尾部作用：进行帧定界(确定帧的界限)，控制字符EOT(End Of Transmission)放在一帧的最后面，表示帧的结束(对应的十六进制编码是04，对应的二进制是：00000100)

```

![image-20201111234112678](/Users/guo/Library/Application Support/typora-user-images/image-20201111234112678.png)

##### 2、透明传输

![image-20201111234731209](/Users/guo/Library/Application Support/typora-user-images/image-20201111234731209.png)

```
由于帧的开始和结束的标记是使用专门指明的控制字符，当传送的帧中数据部分不会出现被接收端解析为SOH或者EOT这样的帧定界控制字符时，这样的传输就称为透明传输
解决方式：保证发送端的数据可能出现的控制字符SOH或EOT在接收端不被解释为控制字符
具体方法：
	在发送端的数据链路层在数据中出现控制字符SOH或者EOT时，在前面插入一个转义字符ESC(十六进制：1B),而在接收端的数据链路层在将数据送往网路层之前删除这个插入的转义字符，该方法被称为字节填充法/字符填充，如果转义字符也出现在数据中，那么解决方法仍然是在转义字符的前面插入一个转义字符，当接收端收到连续的两个转义字符时，就删除其中前面的一个即可。
```

![image-20201111235604319](/Users/guo/Library/Application Support/typora-user-images/image-20201111235604319.png)

##### 3、差错检测

##### 比特差错：是传输差错中的一种，是指在一段时间内，传输错误的比特占所传输比特总数的比率，称为误码率BER(Bit Error Rate)

##### 循环冗余检验CRC(Cyclic Redundary Check)：

> 利用该差错检测措施，保证数据传输的可靠性。计算得出的余数R就作为冗余码拼接在数据M的后面发送，这种为了进行检错而添加的冗余码常称为帧检验序列FCS(Frame Check Sequence)

#####  4、协议

 (1)、点对点协议ppp

```
用途：用于用户计算机和ISP进行通信时所使用的的数据链路层协议
特点：简单、封装成帧、透明性、多种网络层协议、多种类型链路、差错检测、检测连接状态、最大传输单元、(MTU>=1500字节)、网络层地址协商、数据压缩协商、是不可靠传输协议、只支持全双工链路
```
组成
```
1、一个将IP数据报封装到串行链路的方法(数据链路层协议可以用于异步串行或同步串行介质)
```

```
2、一个用来建立、配置、和测试数据链路连接的链路控制协议LCP(Link Control Protocol)
```

```
3、一套网络控制协议NCP(Network Control Protocol)，其中的每个协议支持不同的网络层协议，如IP、OSI的网络层、DECnet、AppleTalk
```

帧格式









#### 广播信道



#### 数据链路、帧

> 链路(link)：是从一个结点到相邻结点的一段物理线路，且中间没有任何其他的交换结点，链路只是一个路径的组成部分
>
> 数据链路(data Link)：将在一条线路上的传送数据 + 必须的物理线路+必要的一些通信协议构成了数据链路

#### 帧

> 定义：是点对点信道的数据链路层的协议数据单元

#### IP数据报

> 定义：网络层协议数据单元就是IP数据报(或简称为数据报、分组、包)

#### 点对点信道的数据链路层通信过程

* 1、结点A的数据链路层将网路层交出的IP数据报添加到首部和尾部，封装成帧
* 2、结点A把封装好的针发送给结点B的数据链路层
* 3、若结点B的数据链路层收到的帧无差错，