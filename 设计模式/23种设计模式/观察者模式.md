## 观察者模式

> 又叫发布-订阅(Publish/Subscribe)模式

#### 定义

一种1对多的依赖关系，让多个观察者对象同时监听一个主题对象。这个主题对象在状态发生变化时，会通知所有观察者对象，使他们能够自动更新自己。

![image-20230402180038232](/Users/guojie/Notes/设计模式/23种设计模式/images/image-20230402180038232.png)

* Subject类，翻译为主题或抽象通知者，一般用一个抽象类或者一个接口实现。它把所有对观察者对象的引用保存在一个聚集里，每个主题都可以由任何数量的观察者。抽象主题提供一个接口，可以增加或删除观察者对象。
* Observer类，抽象观察者，为所有的具体观察者定义一个接又，在得到主题的通知时更新自己。这 个接又叫做更新接又。抽象观察者 一般用 一个抽象类或者 一个接又实现。更新接又通常包含 一个Update0 方法， 这个方法叫做更新方法。
* ConcreteSubject 类，叫做具体主题或具体通知者，将有关状态存入具体现察者对象;，在具体主题的 内部状态改变时，给所有登记过的观察者发出通知。具体 主题角色通常用一个具体子类实现。
* ConcreteObserver 类，具体观察者，实现抽象观察者角色所要求的更新接又，以便使本身的状态与 主题的状态相协调。具体观察者角色可以保存一个指向具体 主题对象的引用。具体观察者角色通常用一 个具体 子类实现。

#### 特点

* 将一个系统分割成一系列相互协作的类有一个很不好的副作用，那就是需要维护相关对 象问的一致性。我们不希望为了维持一致性而使各类紧密轉合，这样会给维护、扩展和重用都带来不便
* 观察者模式所做的工作其实就是在解除耜合。让男合的双方都依赖于抽象， 而不是依赖于具体。从而使得各自的变化都不会影响另 一边的变化